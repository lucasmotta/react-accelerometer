{"version":3,"file":"react-accelerometer.js","sources":["../src/react-accelerometer.js","../src/index.js"],"sourcesContent":["const React = require('react')\n\n/**\n * @usage\n *    <ReactAccelerometer useGravity multiplier={3}>\n *      {(position, rotation) => (\n *        <div style={{ transform: `translate3d(${position.x}px, ${position.y}px, 0)`}}>\n *          Hello there\n *        </div>\n *      )}\n *    </ReactAccelerometer>\n */\nclass ReactAccelerometer extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      x: null,\n      y: null,\n      z: null,\n      rotation: null,\n      landscape: false\n    }\n\n    this.handleAcceleration = this.handleAcceleration.bind(this)\n    this.handleOrientation = this.handleOrientation.bind(this)\n  }\n\n  componentDidMount () {\n    this.handleOrientation()\n    window.addEventListener('devicemotion', this.handleAcceleration)\n    window.addEventListener('orientationchange', this.handleOrientation)\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('devicemotion', this.handleAcceleration)\n    window.removeEventListener('orientationchange', this.handleOrientation)\n  }\n\n  handleOrientation (event) {\n    const { orientation } = window\n    this.setState({ landscape: orientation === 90 || orientation === -90 })\n  }\n\n  handleAcceleration (event) {\n    const { landscape } = this.state\n    const { useGravity, multiplier } = this.props\n    const acceleration = useGravity ? event.accelerationIncludingGravity : event.acceleration\n    const rotation = event.rotationRate || null\n    const { x, y, z } = acceleration\n\n    this.setState({\n      rotation,\n      x: (landscape ? y : x) * multiplier,\n      y: (landscape ? x : y) * multiplier,\n      z: z * multiplier\n    })\n  }\n\n  render () {\n    const { children } = this.props\n    const { x, y, z, rotation } = this.state\n\n    /**\n     * We have to detect if one of the values was ever set by the 'devicemotion' event,\n     * as some browsers implement the API, but the device itself doesn't support.\n     */\n    if (x !== null) {\n      return children({ x, y, z }, rotation)\n    }\n\n    return children()\n  }\n}\n\nReactAccelerometer.propTypes = {\n  children: React.PropTypes.func.isRequired,\n  multiplier: React.PropTypes.number,\n  useGravity: React.PropTypes.bool\n}\n\nReactAccelerometer.defaultProps = {\n  multiplier: 1,\n  useGravity: true\n}\n\nmodule.exports = ReactAccelerometer\n","module.exports = require('./react-accelerometer')\n"],"names":["const","require$$0","super"],"mappings":"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"}